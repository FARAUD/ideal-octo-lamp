#include <stdio.h>
#define N 3

void afficher_regles(void)
{
    printf (" ********** Bienvenue sur le jeu de Morpion ********** \n");
    printf (" Vous jouez tour a tour soit des O, soit des X.\n");
    printf (" Le premier qui gagne est celui qui arrive a aligner 5 signes en ligne, en colonne ou en diagonale.\n");
    printf (" ****************     Bonne chance    **************** \n");
    printf ("\n");
}


char remplir_grille(char grille[N][N+1])
{
    int i, j;

    for (i=0;i<N;i++){
        for (j=0;j<N;j++){
            grille[i][j]='-';
        }
        grille[i][j+1]='\0';
    }
    return grille;
}

void afficher_grille(char grille[N][N+1])
{
    int i,j;

    printf("    ");
    for (i=0;i<N;i++){    //affiche le numÃ©ro des colonnes
        printf (" %d ", i+1);
    }

    printf("\n ");
    printf("    ");
    for (i=0;i<3*N+2;i++){   //affiche grille du dessus
        printf ("_");
    }

    for (i=0;i<N;i++){
        printf("\n");
        if (i<9)
            printf(" ");

        printf(" %d |",i+1);     //affiche grille du cote gauche
        for (j=0;j<N;j++){
                printf(" %c ",grille[i][j]);    //affiche la grille
        }
        printf("|");   //affiche grille du cote droit
    }
    printf("\n");
    printf("    ");
    for (i=0;i<3*N+2;i++){
        printf ("-");      //affiche grille du dessous
    }
}

void jeu (char grille[N][N+1])
{
    int i,j;
    int k=2;    //Pour utiliser le modulo (%)

    printf ("\n Vous allez devoir entrer le numero de ligne puis le numero de colonne.\n");
    printf(" Le premier joueur a les X.\n");

    while (test (grille))
    {
        printf ("\n");
        printf ("\n Ou voulez vouz jouer ? :\n ");
        printf ("Entrer le numero de la ligne : ");
        scanf ("%d",&i);
        printf ("Entrer le numero de la colonne : ");
        scanf ("%d",&j);

        if (grille[i-1][j-1]=='-' && i<=N && j<=N)
        {
            if (k%2==0){
                grille[i-1][j-1]='X';  //Le premier joueur prend les X
            }
            else{
                grille[i-1][j-1]='O';
            }
            k=k+1;
            afficher_grille (grille);
        }
        else
            printf("\n Vous ne pouvez pas jouer ici.\n");
    }
}

void test(char grille[N][N+1])
{
    int i,j;
    for (i=0;i<N;i++){
        for (j=0;j<N;j++){
            if (grille [i][j]=='-'){
                return 1;
            }
        }
    }
    printf ("\n Toutes les cases sont occupees.\n");
    return 0;
}


int main (void)
{
    char grille[N][N+1];   //N+1 sert a mettre \0 a la fin des chars

    afficher_regles();

    remplir_grille(grille);
    afficher_grille(grille);
    jeu(grille);

    free(grille);
    return 0;
}
